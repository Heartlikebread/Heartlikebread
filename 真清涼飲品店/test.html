<!DOCTYPE html>
<html>
  <head>
    <title>层次图示例</title>
    <script src="https://unpkg.com/gojs/release/go.js"></script>
    <style>
      #myDiagramDiv {
        width: 1000px;
        height: 600px;
        border: 1px solid black;
      }
    </style>
  </head>
  <body>
    <div id="myDiagramDiv"></div>
    <script>
      // 创建一个新的GoJS图表
      var $ = go.GraphObject.make

      // 创建一个新的Diagram对象
      var myDiagram = $(
        go.Diagram,
        'myDiagramDiv', // 指定Div的id
        {
          // 设置图表的布局
          layout: $(go.TreeLayout, {
            angle: 90,
            nodeSpacing: 10,
            layerSpacing: 40,
          }),
        }
      )
      myDiagram.nodeTemplate = $(
        go.Node,
        'Auto', // Auto布局
        { width: 100, height: 40 }, // 自定义节点的大小
        $(go.Shape, 'RoundedRectangle', { fill: 'lightblue', stroke: 'black' }), // 形状
        $(
          go.TextBlock,
          { margin: 5, textAlign: 'center' }, // 文本
          new go.Binding('text', 'name')
        ) // 绑定节点的文本到数据的"name"属性
      )
      myDiagram.linkTemplate = $(
        go.Link,
        {
          routing: go.Link.Orthogonal, // 设置为直角路由
          corner: 5, // 设置拐角半径
          fromSpot: go.Spot.BottomSide, // 连接线的起点位置
          toSpot: go.Spot.TopSide, // 连接线的终点位置
          selectable: false, // 禁止选中连接线
        },
        $(go.Shape, { stroke: 'black' }) // 线条
      )
      // 定义一个Node模板
      myDiagram.nodeTemplate = $(
        go.Node,
        'Auto', // Auto布局
        $(go.Shape, 'RoundedRectangle', { fill: 'lightblue' }), // 形状
        $(
          go.TextBlock,
          { margin: 5 }, // 文本
          new go.Binding('text', 'name')
        ) // 绑定节点的文本到数据的"name"属性
      )

      // 定义一个模型并将数据绑定到层次图中
      myDiagram.model = new go.TreeModel([
        { key: '1', name: '決賽' }, // 数据，包含一个key和一个name属性
        { key: '2', parent: '1', name: '準決賽' }, // 父节点为1
        { key: '3', parent: '1', name: '準決賽' }, // 父节点为1
        { key: '4', parent: '2', name: 'Node 4' }, // 父节点为2
        { key: '5', parent: '2', name: 'Node 5' }, // 父节点为2
        { key: '6', parent: '3', name: 'Node 6' }, // 父节点为3
        { key: '7', parent: '3', name: 'Node 7' }, // 父节点为3
      ])
    </script>
  </body>
</html>
