<!-- <!DOCTYPE html>
<html>
  <head>
    <title>GoJS Tree Diagram Export to PDF</title>

    <script src="https://unpkg.com/gojs/release/go.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.4/jspdf.min.js"></script>
    <script>
      function init() {
        var $ = go.GraphObject.make

        var myDiagram = $(go.Diagram, 'myDiagramDiv', {
          layout: $(go.TreeLayout, { angle: 90, layerSpacing: 80 }), // 使用 TreeLayout
        })

        // 定義節點模板
        myDiagram.nodeTemplate = $(go.Node, 'Auto', $(go.Shape, 'RoundedRectangle', { fill: 'lightblue' }), $(go.TextBlock, { margin: 8 }, new go.Binding('text', 'key')))

        var model = $(go.TreeModel)
        // 定義樹狀結構的數據，這裡以 JSON 的形式提供
        model.nodeDataArray = [
          { key: '1', parent: 0 },
          { key: '2', parent: 1 },
          { key: '3', parent: 1 },
          { key: '4', parent: 2 },
          { key: '5', parent: 2 },
          { key: '6', parent: 3 },
          { key: '7', parent: 3 },
        ]

        // 將模型綁定到 Diagram 上
        myDiagram.model = model

        // 匯出為 PDF 函數
        function exportToPDF() {
          var imgData = myDiagram.makeImageData({ background: 'white', returnType: 'dataurl' })
          const jsPDF = require('jspdf')
          var doc = new jsPDF()
          doc.addImage(imgData, 'PNG', 10, 10, 180, 150)
          doc.save('diagram.pdf')
        }

        document.getElementById('exportButton').addEventListener('click', exportToPDF)
      }
    </script>
  </head>
  <body onload="init()">
    <div id="myDiagramDiv" style="width: 100%; height: 600px; border: 1px solid black"></div>
    <button id="exportButton">Export to PDF</button>
  </body>
</html> -->
<!DOCTYPE html>
<html>
  <head>
    <title>GoJS Diagram with Image</title>
    <script src="https://unpkg.com/gojs/release/go.js"></script>
    <script>
      function init() {
        var $ = go.GraphObject.make

        var myDiagram = $(go.Diagram, 'myDiagramDiv')

        // 添加一个节点模板，包含一个图像和一个文本
        myDiagram.nodeTemplate = $(
          go.Node,
          'Auto',
          $(go.Picture, { source: 'https://via.placeholder.com/100', width: 100, height: 100 }), // 设置图像的来源和尺寸
          $(go.TextBlock, { margin: 8 }, new go.Binding('text', 'key'))
        )

        var model = $(go.GraphLinksModel)
        // 定义节点数据
        model.nodeDataArray = [{ key: '1' }, { key: '2' }, { key: '3' }]

        // 将模型绑定到图表上
        myDiagram.model = model
      }
    </script>
  </head>
  <body onload="init()">
    <div id="myDiagramDiv" style="width: 600px; height: 400px; border: 1px solid black"></div>
  </body>
</html>
